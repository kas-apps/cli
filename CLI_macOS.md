# macOS ではじめる CLI 入門 — いっしょにターミナルデビューしよっ！

こんにちは！明るく元気に、あなたのターミナル体験をエスコートするよ。CLI（コマンドライン・インターフェース）ってちょっとドキドキするけど、手順どおりに練習すれば大丈夫。わたしと一緒に、ゆっくり一歩ずつ進めていこうね！

この入門は、あなたが実際に手を動かしながら学べるように作ってあるよ。コマンドはぜんぶ macOS を想定（標準シェルは zsh）。出力例はイメージだから、あなたの環境では日付やユーザー名が少し違っても OK だよ。

最初に「練習用フォルダ」を作って安全に遊ぼうね。消したくない大切なファイルがある場所では試さないように気をつけよ〜！

---

## 1. はじめに

### CLI ってなんだろう？GUI との違い

- GUI（グラフィカル・ユーザー・インターフェース）は、アイコンやボタンをクリックして操作するいつもの画面のことだよ（Finder など）。
- CLI（コマンドライン・インターフェース）は、文字でコマンドを入力して操作する方法。見た目は地味だけど、正確・高速・自動化に強いのが魅力なの！

例え話：  
GUI は「レストランでメニューの中から注文する」感じ。CLI は「オーダー票に正確に書いて注文する」感じ。

- GUI: タッチパネルに表示された「ステーキ」のアイコンを押し、「焼き加減」のボタンを押し、「ソース」のボタンを押し、最後に「決定」ボタンを押して注文
- CLI: 「ステーキをミディアムレアで、付け合わせはアスパラガス、ソースはバルサミコで」のように、言葉で細かく、かつ正確に指示

> [!TIP]
> CLI と CUI の関係
>
> - CUI（キャラクタ・ユーザー・インターフェース）は「文字でやりとりする UI」の総称。
> - CLI は CUI の中でも「コマンドを打って処理する」タイプ。つまり CLI ⊂ CUI って関係だよ。

---

### AI 時代の今、なぜコマンド操作を学ぶの？ AI を「賢く安全に使いこなす」ために！

CLI の基本を学ぶ目的は、AI を**賢く、安全に使いこなすための主導権を握る**ことなんです。

#### 1. AI の提案を理解し、安全に使うために

AI は非常に優秀ですが、時々、私たちの意図とは違う、少し危険なコマンドを提案してしまう可能性もゼロではありません。

例えば、「PC の中を整理して」とお願いしたら、もし AI が間違えて「全部消し去る」という超危険な呪文（`rm -rf /` など）を唱えようとしたら…？

CLI の知識があれば、あなたはその呪文を見て、「おっと、これは全部消すコマンドだ。危ない！」と**AI の提案を理解し、危険を未然に防ぐ**ことができます。AI の言いなりになるのではなく、AI を安全に使うための「賢い主（あるじ）」になれるのです。

#### 2. AI に、より的確な指示を出すために

CLI の強みは、小さなコマンドを「パイプ（`|`）」という記号で繋ぎ合わせて、複雑な処理を自動化できる点にあります。

- 「ファイルの一覧（`ls`）から」
- 「テキストファイル（`.txt`）だけを絞り込み（`grep`）」
- 「その数を数える（`wc -l`）」

といった一連の流れを、`ls | grep .txt | wc -l` のように一行で表現できます。

このような「コマンドの文法」を知っていると、**「こういう手順で、この処理をしてほしい」と、より正確で複雑な指示**を出せるようになります。

そしてこの「パイプ（`|`）」で処理を繋げる考え方は、**CLI 上で動作する AI アシスタントと組み合わせることで、さらに強力になります**。コマンドの実行結果をそのまま AI に渡して要約させたり、AI が生成したコードをファイルに保存したりと、複雑な処理の自動化に AI を組み込むことができるのです。

コマンドの実行結果を AI に渡す例：

```bash
# 議事録を要約して別のファイルに保存する
cat minutes.txt | gemini -p "要約して" > summary.md
```

---

### ターミナルを使ってみよう

1. Spotlight を開く（`Command + Space`）
2. 「Terminal」と入力して Enter
3. こんな感じのプロンプトが出れば準備 OK！

```bash
user@MacBook-Pro ~ %
```

- 最後の記号 `%` は zsh の合図。入力して Enter を押すとコマンドが実行されるよ。

まずは安全に練習するためのフォルダを作ろう！

```bash
# デスクトップに練習用フォルダを作る(以下を１行ずつ実行)
cd ~/Desktop
mkdir cli-practice
cd cli-practice
pwd
```

実行結果（例）:

```bash
/Users/あなたのユーザー名/Desktop/cli-practice
```

---

## 2. ファイルとディレクトリの基本

### フォルダとディレクトリは同じもの？

みなさんが普段「フォルダ」と呼んでいるものは、CLI の世界では「ディレクトリ」と呼ばれます。呼び方が違うだけで、役割はまったく同じ！ファイルを整理するための「入れ物」のことです。

GUI（グラフィカルな画面）ではフォルダ、CLI（文字の画面）ではディレクトリ、と覚えておくとスムーズですよ。この資料では、基本的に「ディレクトリ」という言葉を使っていきますね。

---

### PC の中はどうなってる？（階層構造）

- macOS のファイルは「入れ子（ディレクトリの中にディレクトリ）」の階層構造だよ。
- キーワード
  - 絶対パス：ルート（`/`）から全部書く（例：`/Users/you/Desktop`）
  - 相対パス：いまいる場所からの道順（例：`../Documents`）
  - `~`：あなたのホーム（`/Users/あなたのユーザー名`）
  - `.`：現在地、`..`：1 つ上の階層（親）

---

### 現在地を確認する（`pwd`）

```bash
pwd
```

出力（例）:

```bash
/Users/あなたのユーザー名/Desktop/cli-practice
```

- pwd = print working directory（いまいる場所を表示）

---

### 中身を一覧表示する（`ls`）

まずはサンプルの入れ物を少し作るね：

```bash
mkdir photos scripts
touch notes.txt README.md
```

一覧表示してみよう！

```bash
ls
```

出力（例）:

```bash
notes.txt  photos  README.md  scripts
```

詳しく表示（`-l` は「長い形式」、`-F` は種別表示の飾り）：

```bash
ls -lF
```

出力（例）:

```bash
-rw-r--r--  1 you  staff    0 Sep 26 14:19 notes.txt
drwxr-xr-x  2 you  staff   64 Sep 26 14:20 photos/
-rw-r--r--  1 you  staff    0 Sep 26 14:19 README.md
drwxr-xr-x  2 you  staff   64 Sep 26 14:20 scripts/
```

> [!NOTE]
> 各行先頭の`drwxr-xr-x`のような部分は「パーミッション（権限）」を表しています。最初の`d`はディレクトリ、`-`はファイルを示します。`rwx`はそれぞれ「読み取り(read)」「書き込み(write)」「実行(execute)」の権限があることを示しています。今は「そんな設定があるんだな」くらいで大丈夫！

他にも便利なオプションがあるよ。

- `-A`：`.`から始まる隠しファイルも表示する
- `-h`：ファイルサイズを人間が読みやすい単位(KB, MB, GB)で表示する

```bash
ls -Alh
```

---

### 場所を移動する（`cd`）

```bash
cd photos
pwd
```

出力（例）:

```bash
/Users/あなたのユーザー名/Desktop/cli-practice/photos
```

- 1 つ上へ戻る：

```bash
cd ..
pwd
```

- ホームへ移動：

```bash
cd
pwd
```

- 直前の場所へ戻る（トグル）：

```bash
cd -
```

---

## 3. ファイル・ディレクトリの操作

練習用ディレクトリに戻って進めようね：

```bash
cd ~/Desktop/cli-practice
```

---

### ディレクトリを作成する（`mkdir`）

```bash
mkdir project
ls -F
```

出力（例）:

```bash
README.md  notes.txt  photos/  project/  scripts/
```

- まとめて作る＆途中の階層も同時に（`-p`）：

```bash
mkdir -p logs/2025/09
ls -R logs
```

出力（例）:

```bash
logs:
2025

logs/2025:
09

logs/2025/09:
```

---

### 空のファイルを作成する（`touch`）

```bash
touch hello.txt
ls -l hello.txt
```

出力（例）:

```bash
-rw-r--r--  1 you  staff  0 Sep 26 14:30 hello.txt
```

- `touch` は「新規に空ファイルを作る」か「更新時刻を今にする」コマンドだよ。

---

### ファイルやディレクトリをコピーする（`cp`）

ファイルをコピー：

```bash
cp hello.txt hello-copy.txt
ls
```

出力（例）:

```bash
README.md  hello-copy.txt  hello.txt  logs  notes.txt  photos  project  scripts
```

ディレクトリをコピー（`-R` は中身ごと再帰的に）：

```bash
cp -R photos photos-backup
ls -F
```

出力（例）:

```bash
README.md  hello-copy.txt  hello.txt  logs/  notes.txt  photos/  photos-backup/  project/  scripts/
```

---

### ファイルやディレクトリを移動する/名前を変更する（`mv`）

名前を変える（リネーム）：

```bash
mv hello-copy.txt greetings.txt
ls
```

出力（例）:

```bash
README.md  greetings.txt  hello.txt  logs  notes.txt  photos  photos-backup  project  scripts
```

別の場所へ動かす：

```bash
mv greetings.txt photos/
ls photos
```

出力（例）:

```bash
greetings.txt
```

> [!TIP]
> ファイル名にスペースが含まれる場合は、ファイル名をダブルクォーテーション(`"`)で囲むか、スペースの直前にバックスラッシュ(`\`)を置いてみましょう。
>
> ```bash
> # ダブルクォーテーションで囲む
> mv "My File.txt" photos/
>
> # バックスラッシュを使う
> mv My\ File.txt photos/
> ```

---

### ファイルを削除する（`rm`）

> [!WARNING]
> Finder のゴミ箱と違って、`rm`コマンドは実行するとファイルが**完全に**削除されます。元に戻すのはとても難しいので、特に慣れないうちは慎重に使いましょう。

ファイルを削除：

```bash
# 「`|`」は左のコマンドの実行結果を右のコマンドに渡す記号で、「パイプ」って言うんだ。
# 「`||`」は、左のコマンドが失敗したら、右のコマンドを実行するっていう意味だよ。
rm hello.txt
ls | grep hello || echo "hello.txt はありません"
```

出力（例）:

```bash
hello.txt はありません
```

確認しながら削除（`-i` は対話的。うっかり防止に超おすすめ！）：

```bash
rm -i notes.txt
# 出る質問例: remove notes.txt?
# y と入力して Enter で削除
# n と入力して Enter でキャンセル
```

> [!TIP]
> どうしても`rm`コマンドが不安な時は、`mv`コマンドを使ってファイルをゴミ箱に移動させる、という方法もあります。これなら、もし間違えても Finder のゴミ箱から元に戻せますね。
>
> ```bash
> mv notes.txt ~/.Trash/
> ```
>
> [!CAUTION]
> ファイル名がハイフン(`-`)で始まるファイルを削除する時は、`rm -- -weird.txt`のように、ファイル名の前に`--`をつけましょう。そうしないと、ファイル名がコマンドのオプションだと勘違いされて、エラーになることがあります。

---

#### 空のディレクトリを削除する (`rmdir`)

`rmdir`コマンドは、**中身が空の**ディレクトリだけを削除できます。

```bash
mkdir emptydir
rmdir emptydir
ls | grep emptydir || echo "emptydir はありません"
```

出力（例）:

```bash
emptydir はありません
```

---

#### 中身があるディレクトリを削除する (`rm -r`)

中身が入っているディレクトリを丸ごと削除したい場合は、`rm`コマンドに`-r`オプションをつけます。

```bash
rm -r photos-backup
ls -F | grep photos-backup || echo "photos-backup はありません"
```

出力（例）:

```bash
photos-backup はありません
```

確認しながら削除（`-i`オプションをつける）を推奨：

```bash
rm -ri photos-backup
```

---

## 4. ファイルの中身を見る

### ファイルの内容をすべて表示する（`cat`）

まず内容のあるファイルを作るね（`echo` で行を追加）：

```bash
echo "一行目だよ" > poem.txt
echo "二行目もいるよ" >> poem.txt
cat poem.txt
```

出力（例）:

```bash
一行目だよ
二行目もいるよ
```

---

### 長いファイルも安心！スクロールしながら見る（`less`）

```bash
less poem.txt
```

画面には内容がページ単位で表示されるよ。主なキー操作：

- スペース/`f`：1 ページ進む
- `b`：1 ページ戻る
- 上下矢印：1 行ずつ移動
- `/文字列`：前方検索、`n` 次を検索、`N` 後ろを検索
- `g` 先頭、`G` 末尾
- `q` 終了（これでターミナルに戻るよ）

> [!IMPORTANT]
> less の画面から戻れなくなったら、慌てず`q`キーを押してみてね！

出力イメージ（画面表示）:

```bash
一行目だよ
二行目もいるよ
(END)
```

---

## 5. 知っているとちょっと便利

### コマンドの履歴を確認する（zsh）

- 直近の履歴を見る：

```bash
history | tail -n 5
```

出力（例）:

```bash
 121  ls -lF
 122  cp -R photos photos-backup
 123  mv greetings.txt photos/
 124  rm -i notes.txt
 125  history | tail -n 5
```

- 直前のコマンドをもう一度：

```bash
!!
```

- 履歴番号で実行（例：121 番）：

```bash
!121
```

- 履歴の検索（超便利！）：`Ctrl + r` を押して、探したい文字を打つ → Enter で実行、`Esc` で編集してから Enter でも OK
- 履歴を遡って実行（超超便利！）：`↑`, `↓` を押して、コマンド履歴を遡る → Enter で実行
  - `↑`, `↓` は `Ctrl + p`, `Ctrl + n` でも OK

---

### 入力を補完する（Tab キー）

- 途中まで入力して `Tab` を押すと、候補を補完してくれるよ。

```bash
cd scr<Tab>
```

出力（例）:

```bash
cd scripts/
```

- 候補が複数あるときは、もう一度 `Tab` で一覧が出ることも。タイプ数が減って、入力ミスも減るからどんどん使おう！

> [!NOTE]
> Tab キーによる補完と似ているけれど、もっと強力なのがワイルドカード（グロブ）だよ。例えば `*.txt` と書くと「`.txt`で終わるすべてのファイル」という意味になります。これはシェルの機能で、コマンドが実行される前に`*`の部分がファイル名に展開されるんだ。今後の学習で詳しく触れるけど、こういう便利な記号があることも知っておくと、世界が広がるよ！

---

### Finder と連携する（`open`コマンド）

CLI で作業していて、「やっぱり GUI の画面でファイルを確認したいな」と思うこと、ありますよね。そんな時に超便利なのが、macOS 専用の`open`コマンドです！

- **今いる場所を Finder で開く**

```bash
open .
```

このコマンドを実行すると、今ターミナルで作業しているディレクトリが Finder ウィンドウでパッと開きます。これは本当に便利！

- **特定のファイルやアプリケーションを開く**

```bash
# `poem.txt`をデフォルトのテキストエディタで開く
open -t poem.txt

# `poem.txt`をテキストエディット.appで開く
open -e poem.txt

# `photos`ディレクトリをFinderで開く
open photos

# `Safari`アプリケーションを開く
open -a Safari

# `poem.txt`をFinderで選択して表示する
open -R poem.txt
```

`open`コマンドを使いこなせば、CLI と GUI の良いとこ取りができて、作業がもっとスムーズになりますよ！

> [!TIP]
> Finder 上にあるファイルやディレクトリをターミナルにドラッグ＆ドロップすると、そのファイルやディレクトリのフルパスが自動で入力されるよ。長いパスを打つのが面倒な時に試してみてね！

---

### クリップボードとの連携（`pbcopy`, `pbpaste`）

macOS には、クリップボードと連携するための超便利なコマンド`pbcopy`と`pbpaste`があります。これも`open`コマンドと同じく、macOS ならではのご褒美機能だよ！

- **コマンドの実行結果をクリップボードにコピーする**

```bash
# `pwd`の実行結果をクリップボードにコピーする
pwd | pbcopy
```

- **クリップボードの内容をファイルに書き出す**

```bash
# クリップボードの内容を`clip.txt`というファイルに書き出す
pbpaste > clip.txt
```

---

### VSCode と連携する（`code`コマンド）

もしあなたがコードエディタとして Visual Studio Code（VSCode）を使っているなら、`code`コマンドがとっても便利だよ！

※このコマンドを使うには、VSCode をインストールした後に、「シェルコマンドのインストール」という設定が必要です。VSCode を開いて、`Command + Shift + P`でコマンドパレットを出し、「`Shell Command: Install 'code' command in PATH`」を実行すると使えるようになります。

- **今いる場所を VSCode で開く**

プロジェクトのルートディレクトリに`cd`で移動したあと、次のコマンドを打ってみて！

```bash
code .
```

これだけで、今いるディレクトリをプロジェクトとして VSCode の新しいウィンドウで開いてくれます。いちいち VSCode の「ファイル」メニューから「開く...」を選ばなくていいから、すっごく楽ちん！

- **特定のファイルを開く**

```bash
# README.mdをVSCodeで開いて編集する
code README.md
```

CLI でファイルを探して、そのまま`code`コマンドで編集を始める、なんていうスムーズな連携ができるようになりますよ。

---

### Cursor と連携する（`cursor`コマンド）

AI 搭載エディタとして人気の Cursor を使っているなら、`cursor`コマンドも同じように使えます！

※このコマンドを使うには、Cursor をインストールした後に、「シェルコマンドのインストール」という設定が必要です。Cursor を開いて、`Command + Shift + P`でコマンドパレットを出し、「`Shell Command: Install 'cursor' command in PATH`」を実行すると使えるようになります。

- **今いる場所を Cursor で開く**

```bash
cursor .
```

- **特定のファイルを開く**

```bash
# README.mdをCursorで開いて編集する
cursor README.md
```

---

### おまけショートカット

- `Ctrl + c`：実行中のコマンドを中断
- `Ctrl + u`：入力中の行をすべてクリア
- `Ctrl + a` / `Ctrl + e`：行の先頭 / 末尾へ
- `Ctrl + l`：画面をきれいに（スクロールでこれまでの実行結果が見れる）
- `clear` または `Command + k`：画面をきれいに（スクロールしても実行結果が見れない）

---

## 6. おわりに

### これからの学習に向けて

次のステップでおすすめのテーマだよ。ワクワクするね！

- リダイレクト：`>`（上書き）、`>>`（追記）
- パイプ：`|`（コマンドとコマンドをつなぐ）
- 検索：`grep`（文字列検索）、`rg`（高速検索ツール：別途導入）
- 権限：`chmod`、`chown`
- 圧縮：`zip` / `unzip`、`tar`
- ネットワーク：`curl`、`ping`

---

### ミニ課題（自習用）

学んだことを使って、腕試ししてみよう！

1. `project`ディレクトリの中に`src`と`docs`というディレクトリを作ってみよう。
2. `README.md`を`docs`ディレクトリにコピーして、`open -R docs/README.md`で Finder で確認してみよう。
3. `poem.txt`を`docs`ディレクトリに移動して、`less`コマンドで中身を読んでみよう。
4. `history`コマンドで、今日使ったコマンドの履歴を眺めてみよう。
5. `ls -Alh`の結果を`pbcopy`を使ってクリップボードにコピーして、テキストエディタに貼り付けてみよう。

---

### 困ったときの調べ方

- 公式ヘルプ：

```bash
man ls      # マニュアル
ls --help   # ヘルプ（ないコマンドもあるよ）
```

- 用語で探す（曖昧でも OK）：

```bash
apropos mkdir   # 「mkdir」に関連するコマンドを一覧
whatis mkdir      # コマンドの一言説明
```

- Web 検索のコツ：
  - キーワード + “macOS” + “zsh” を付けると近い情報に出会いやすいよ。
  - Linux と macOS でオプションが違うことがあるから、記事の前提に注意してね。

> [!NOTE]
> Web 上の記事を探すとき、macOS のコマンドは「BSD 系」、多くの Linux ディストリビューションのコマンドは「GNU 系」と呼ばれていることを知っておくと、より正確な情報にたどり着きやすくなります。例えば、`ls --help`のように、macOS(BSD 系)では使えないオプションが、Linux(GNU 系)では使える、といった違いがあります。

---

## 付録：今日使ったコマンド早見表（超ざっくり）

| コマンド  | 役割                    | よく使う例                     |
| --------- | ----------------------- | ------------------------------ |
| `pwd`     | いまの場所を表示        | `pwd`                          |
| `ls`      | 中身一覧                | `ls -lF`                       |
| `cd`      | 移動                    | `cd ..` / `cd ~/Desktop`       |
| `mkdir`   | ディレクトリ作成        | `mkdir -p logs/2025/09`        |
| `touch`   | 空ファイル作成/時刻更新 | `touch memo.txt`               |
| `cp`      | コピー                  | `cp -R photos photos-backup`   |
| `mv`      | 移動/リネーム           | `mv memo.txt docs/`            |
| `rm`      | 削除（注意！）          | `rm -i file.txt`               |
| `rmdir`   | 空ディレクトリ削除      | `rmdir emptydir`               |
| `cat`     | 全文表示                | `cat poem.txt`                 |
| `less`    | ページ表示              | `less poem.txt`                |
| `history` | 履歴                    | `history \| tail -n 10`        |
| `open`    | Finder やアプリで開く   | `open .` / `open file.txt`     |
| `pbcopy`  | クリップボードにコピー  | `cat file.txt \| pbcopy`       |
| `pbpaste` | クリップボードから貼付  | `pbpaste > new-file.txt`       |
| `code`    | VSCode で開く           | `code .` / `code file.txt`     |
| `cursor`  | Cursor で開く           | `cursor .` / `cursor file.txt` |

---

ここまでできたあなた、すごい！もう CLI の第一歩をしっかり踏み出せたよ。最初はゆっくりで大丈夫。少しずつ “手が覚える” 感覚が出てくるから、毎日ちょっとだけでも触ってみてね。わからないことがあったらまた呼んで！いっしょにレベルアップしていこ〜！！
